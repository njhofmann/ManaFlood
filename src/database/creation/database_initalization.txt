--Types of mana / mana costs, read as "___ mana".
--Intended to be an enum
CREATE TABLE ManaType (
  id INTEGER PRIMARY KEY,
  symbol TEXT NOT NULL,
  type TEXT NOT NULL
);

INSERT INTO ManaType (symbol, type) VALUES
("{G}", "Green"),
("{U}", "Blue"),
("{R}", "Red"),
("{W}", "White"),
("{B}", "Black"),
("{X}", "Generic"),
("{G/P}", "Phyrexian Green"),
("{U/P}", "Phyrexian Blue"),
("{R/P}", "Phyrexian Red"),
("{W/P}", "Phyrexian White"),
("{B/P}", "Phyrexian Black"),
("{W/U}", "White Blue"),
("{W/B}", "White Black"),
("{B/R}", "Black Red"),
("{B/G}", "Black Green"),
("{U/B}", "Blue Black"),
("{U/R}", "Blue Red"),
("{R/G}", "Red Green"),
("{R/W}", "Red White"),
("{G/W}", "Green White"),
("{G/U}", "Green Blue"),
("{2/W}", "2 Generic or White"),
("{2/B}", "2 Generic or Black"),
("{2/R}", "2 Generic or Red"),
("{2/U}", "2 Generic or Blue"),
("{2/G}", "2 Generic or Green");

--Characteristics appearing before card types and subtypes
--Intended to be an enum
CREATE TABLE Supertype (
  id INTEGER PRIMARY KEY,
  type TEXT
);

INSERT INTO Supertype (id, type) VALUES
(1, "basic"),
(2, "elite"),
(3, "legendary"),
(4, "ongoing"),
(5, "snow"),
(6, "world");

--Main possible types of a card
--Intended to be an enum
CREATE TABLE Type (
  id INTEGER PRIMARY KEY,
  type TEXT NOT NULL
);

INSERT INTO Type (id, type) VALUES
(1, "artifact"),
(2, "conspiracy"),
(3, "creature"),
(4, "enchantment"),
(5, "instant"),
(6, "land"),
(7, "phenomenon"),
(8, "plane"),
(9, "planeswalker"),
(10, "scheme"),
(11, "sorcery"),
(12, "tribal"),
(13, "vanguard");

--Different rarities of a card
--Intended to be an enum
CREATE TABLE Rarity (
  id INTEGER PRIMARY KEY,
  rarity TEXT NOT NULL
);

INSERT INTO Rarity(id, rarity) VALUES
(1, "mythic rare"),
(2, "rare"),
(3, "uncommon"),
(4, "common");

--Different subtypes of a card
CREATE TABLE Subtype (
  id INTEGER PRIMARY KEY,
  type TEXT NOT NULL
);

--All the different expansions that have been released in MTG's history
CREATE TABLE Expansion (
  abbrv TEXT PRIMARY KEY,
  expansion TEXT NOT NULL,
  block TEXT NOT NULL
 );

--An individual card
CREATE TABLE Card (
  name TEXT PRIMARY KEY,
  card_text TEXT NOT NULL,
  cmc INTEGER NOT NULL
 );

--If a card is of creature type, or can gain creature type (Vehicles), stores its power and toughness
--Not all p/t's are integers, some may be non-integer symbols like X or *
CREATE TABLE CreatureStats (
  card_name TEXT PRIMARY KEY,
  power STRING,
  toughness STRING,
  FOREIGN KEY(card_name) REFERENCES Card(name)
 );

--Different planeswalker loyalties
CREATE TABLE PlaneswalkerStats (
  card_name TEXT PRIMARY KEY,
  loyalty INTEGER,
  FOREIGN KEY(card_name) REFERENCES Card(name)
);

--
CREATE TABLE CardMana (
  card_name TEXT,
  mana_type INTEGER,
  quantity INTEGER,
  PRIMARY KEY(card_name, mana_type),
  FOREIGN KEY(card_name) REFERENCES Card(name),
  FOREIGN KEY(mana_type) REFERENCES ManaType(id)
);

CREATE TABLE CardExpansion (
  card_name TEXT,
  expansion TEXT,
  rarity INTEGER,
  flavor_text TEXT,
  artist TEXT,
  PRIMARY KEY(card_name, expansion),
  FOREIGN KEY(card_name) REFERENCES Card(name),
  FOREIGN KEY(expansion) REFERENCES Expansion(abbrv),
  FOREIGN KEY(rarity) REFERENCES RARITY(id)
);

CREATE TABLE CardSupertype (
  card_name TEXT,
  supertype INTEGER,
  PRIMARY KEY(card_name, supertype),
  FOREIGN KEY(card_name) REFERENCES Card(name),
  FOREIGN KEY(supertype) REFERENCES Supertype(id)
);

CREATE TABLE CardType (
  card_name TEXT,
  type INTEGER,
  PRIMARY KEY(card_name, type),
  FOREIGN KEY(card_name) REFERENCES Card(name),
  FOREIGN KEY(type) REFERENCES Type(id)
);

CREATE TABLE CardSubtype (
  card_name TEXT,
  subtype INTEGER,
  PRIMARY KEY(card_name, subtype),
  FOREIGN KEY(card_name) REFERENCES Card(name),
  FOREIGN KEY(subtype) REFERENCES Subtype(id)
);

CREATE TABLE Deck (
  id INTEGER PRIMARY KEY,
  name TEXT,
  desp TEXT
);

CREATE TABLE DeckInstance (
  id INTEGER PRIMARY KEY,
  deck_id INTEGER,
  creation DATETIME,
  FOREIGN KEY(deck_id) REFERENCES DECK(id)
);

CREATE TABLE Quantity (
  deck_id INTEGER,
  card_name TEXT,
  quantity INTEGER,
  PRIMARY KEY(deck_id, card_name),
  FOREIGN KEY(deck_id) REFERENCES DECK(id)
);

CREATE TABLE Category (
  deck_id INTEGER,
  card_name TEXT,
  category TEXT,
  PRIMARY KEY(deck_id, card_name),
  FOREIGN KEY(deck_id) REFERENCES DECK(id)
);
